#!/usr/bin/env python

#prendre en parem l'url
import sys
import subprocess
import re

#select the given url

url = str(sys.argv).split()[1]
url = url.split(']')[0]
print(url)

"""
#Starting SQL Injection
print("-------------------------")
print("|++ Performing sqlmap ++|")
print("-------------------------")

stdoutdata = subprocess.getoutput("sqlmap --batch -u "+url+"?id=1") #sqlmap use
print(stdoutdata) #print result

print("---------------------------")
print("|++ Performing nslookup ++|")
print("---------------------------")

stdoutdata = subprocess.getoutput("nslookup "+url) #nslookup use
print(stdoutdata) #print result

adress = stdoutdata.split('canonical')[1] #Find the ip adress of te server
adress = adress.split('Address:')[1]

print("-----------------------")
print("|++ Performing nmap ++|")
print("-----------------------")

stdoutdata = subprocess.getoutput("nmap "+adress) #nmap use
print(stdoutdata) #print result
"""
print("--------------------------")
print("|++ Performing whatweb ++|")
print("--------------------------")


stdoutdata = subprocess.getoutput("whatweb "+url+" --color=never") #whatweb use
print(stdoutdata) #print result

#Test to isolate the software version, works in the file testregex.py
print(type(stdoutdata))
r1 = re.findall(r"[a-zA-Z]+\[+[0-9-.]+\]",stdoutdata)
print(type(r1))
print("Version : ")
print(r1)
